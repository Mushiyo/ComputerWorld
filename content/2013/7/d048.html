title=〔大學生程式解題系統〕d048: 中位數
date=2013-07-31 19:29
full_date=2013-07-31T19:29:00.000+08:00
type=post
allowComment=true
tags=【競賽＆解題】, 〔大學生程式解題系統〕
status=published
~~~~~~

題目：<a href="http://judge.nccucs.org/ShowProblem?problemid=d048">http://judge.nccucs.org/ShowProblem?problemid=d048</a><br /><!--more--><br />解題雜記：<br />　　開兩個heap，一個是max heap，存放目前所出現的數字中比較小的那一半；另一個是min heap，存放目前所出現的數字中比較大的那一半。由於數字的總個數可能為奇數，所以在這樣的情形下一定會有一個heap比另一個heap裝的數字個數還多一，底下的程式碼是固定用max heap來當比較多的那一個，不過實際上用哪個heap都可以，只要固定一方然後有維持兩個heap的平衡就好。當數字的總數為偶數時，中位數就是兩個heap的top相加除以2；當數字的總數為奇數時，中位數就是比較多的那個heap的top。<br /><br />C++： <br /><pre class="brush:c">/*Filename: d048.cpp<br /> *Author: Mushiyo<br /> */<br /><br />#include &lt;iostream&gt;<br />#include &lt;queue&gt;<br /><br />using namespace std;<br /><br />int main() {<br /> int num = 0;<br /> int totalNum = 0;<br /> // a maxHeap for smallerHalf<br /> priority_queue&lt;int&gt; smallerHalf;<br /> // a minHeap for bigger half<br /> priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; biggerHalf;<br /><br /> while (cin &gt;&gt; num) {<br />  ++totalNum;<br /><br />  if (smallerHalf.empty() == true) {<br />   smallerHalf.push(num);<br />  } else {<br />   int currentMiddleNum = smallerHalf.top();<br /><br />   if (num &lt; currentMiddleNum) {<br />    smallerHalf.push(num);<br />   } else {<br />    biggerHalf.push(num);<br />   }<br /><br />   // balance the two heap<br />   if (totalNum % 2 == 0) {<br />    while (smallerHalf.size() &gt; biggerHalf.size()) {<br />     int tmp = smallerHalf.top();<br />     smallerHalf.pop();<br />     biggerHalf.push(tmp);<br />    }<br /><br />    while (biggerHalf.size() &gt; smallerHalf.size()) {<br />     int tmp = biggerHalf.top();<br />     biggerHalf.pop();<br />     smallerHalf.push(tmp);<br />    }<br /><br />   } else {<br />    while (smallerHalf.size() &gt; biggerHalf.size() + 1) {<br />     int tmp = smallerHalf.top();<br />     smallerHalf.pop();<br />     biggerHalf.push(tmp);<br />    }<br /><br />    while (biggerHalf.size() &gt; smallerHalf.size() - 1) {<br />     int tmp = biggerHalf.top();<br />     biggerHalf.pop();<br />     smallerHalf.push(tmp);<br />    }<br /><br />   }<br /><br />  }<br /><br />  if (totalNum % 2 == 0) {<br />   long middleNum = (smallerHalf.top() + biggerHalf.top()) / 2;<br />   cout &lt;&lt; middleNum &lt;&lt; endl;<br />  } else {<br />   cout &lt;&lt; smallerHalf.top() &lt;&lt; endl;<br /><br />  }<br /> }<br /><br /> return 0;<br />}<br /><br /><br /></pre>
