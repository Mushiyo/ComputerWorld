title=〔UVa〕101 - The Blocks Problem
date=2015-01-31 22:52
full_date=2015-01-31T22:52:00.003+08:00
type=post
allowComment=true
tags=〔UVa〕, 【競賽＆解題】
status=published
~~~~~~

Problem：<a href="http://uva.onlinejudge.org/external/1/101.html">http://uva.onlinejudge.org/external/1/101.html</a><br /><!--more--><br />Solution Description:<br />Simulate the process. To save some work, we can disassemble the command as follows:<br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">move a</span> means returning blocks on a first, then do the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">pile a</span> command;<br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">onto b</span> means returning blocks on b first, then do <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">over b</span>. So whenever we encounter <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">move </span>or <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">onto</span>, we return the blocks first, then do <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">pile a over b</span>.<br /><br />Java：<br /><pre class="brush:java">/* Filename: UVa101.java<br /> * Author: Mushiyo<br /> */<br /><br />import java.util.Scanner;<br />import java.util.Arrays;<br /><br />public class UVa101 {<br /> private static int NO_BLOCK = -1;<br /><br /> public static void main(String[] args) {<br />  Scanner input = new Scanner(System.in);<br /><br />  while (input.hasNext()) {<br />   int n = input.nextInt();<br />   int[][] block = new int[n][n + 1];<br /><br />   initialize(block);<br /><br />   while (true) {<br />    String cmd = input.next();<br /><br />    if (cmd.equals("quit")) {<br />     break;<br />    } else {<br />     int a = input.nextInt();<br />     String way = input.next();<br />     int b = input.nextInt();<br /><br />     Position pA = findPosition(a, block);<br />     Position pB = findPosition(b, block);<br /><br />     if (pA.row == pB.row) {<br />      continue;<br />     }<br /><br />     if (way.equals("onto")) {<br />      returnAbove(pB, block);<br />     }<br /><br />     if (cmd.equals("move")) {<br />      returnAbove(pA, block);<br />     }<br />     <br />     aToB(pA, pB, block);<br />    }<br />   }<br /><br />   printBlock(block);<br />  }<br /> }<br /><br /> private static void initialize(int[][] block) {<br />  for (int i = 0; i &lt; block.length; ++i) {<br />   block[i][0] = i;<br />  }<br /><br />  for (int i = 0; i &lt; block.length; ++i) {<br />   for (int j = 1; j &lt; block[i].length; ++j)<br />    block[i][j] = NO_BLOCK;<br />  }<br /> }<br /><br /> private static void printBlock(int[][] block) {<br />  for (int i = 0; i &lt; block.length; ++i) {<br />   System.out.printf("%d:", i);<br />   for (int j = 0; j &lt; block[i].length; ++j) {<br />    if (block[i][j] != NO_BLOCK) {<br />     System.out.printf(" %d", block[i][j]);<br />    }<br />   }<br />   System.out.println();<br />  }<br /> }<br /><br /> private static Position findPosition(int num, int[][] block) {<br />  int row = 0;<br />  int height = 0;<br /><br />  for (int i = 0; i &lt; block.length; ++i) {<br />   for (int j = 0; j &lt; block[i].length; ++j) {<br />    if (block[i][j] == num) {<br />     row = i;<br />     height = j;<br />     break;<br />    }<br />   }<br />  }<br /><br />  return new Position(row, height);<br /> }<br /><br /> private static void returnAbove(Position p, int[][] block) {<br />  int row = p.row;<br />  int height = p.height;<br /><br />  for (int h = height + 1; h &lt; block[row].length; ++h) {<br />   if (block[row][h] != NO_BLOCK) {<br />    block[block[row][h]][0] = block[row][h];<br />    block[row][h] = NO_BLOCK;<br />   }<br />  }<br /> }<br /><br /> private static void aToB(Position pA, Position pB, int[][] block) {<br />  int bEnd = pB.height;<br />  while (block[pB.row][bEnd] != NO_BLOCK) {<br />   ++bEnd;<br />  }<br /><br />  int cursor = pA.height;<br />  while (block[pA.row][cursor] != NO_BLOCK) {<br />   block[pB.row][bEnd] = block[pA.row][cursor];<br />   block[pA.row][cursor] = NO_BLOCK;<br />   ++bEnd;<br />   ++cursor;<br />  }<br /> }<br /><br /> private static class Position {<br />  int row, height;<br /><br />  Position(int row, int height) {<br />   this.row = row;<br />   this.height = height;<br />  }<br /> }<br />}<br /><br /></pre>
